{% extends 'base.html' %}

<style>
.chat-messages {
    margin-top: 20px;
    border: 1px solid #ddd;
    border-radius: 8px;
    background: #f9f9f9;
}

.chat-header {
    background: #333;
    color: white;
    padding: 10px;
    border-radius: 8px 8px 0 0;
    text-align: center;
}

.chat-header h4 {
    margin: 0;
    font-size: 14px;
}

.messages-container {
    max-height: 200px;
    overflow-y: auto;
    padding: 10px;
}

.message {
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 6px;
    padding: 8px 12px;
    margin-bottom: 8px;
    font-size: 12px;
    line-height: 1.4;
}

.message.info {
    border-left: 4px solid #2196F3;
}

.message.success {
    border-left: 4px solid #4CAF50;
}

.message.warning {
    border-left: 4px solid #FF9800;
}

.message.error {
    border-left: 4px solid #F44336;
}

.message-time {
    color: #666;
    font-size: 10px;
    margin-top: 4px;
}
</style>

{% block content %}

<div class="pro-form">
<form class="pro" action="" method="post" enctype="multipart/form-data" id="uploadForm">

    <div class="flex gap-4">
        <label class="custom-checkbox-pro">
            <input type="checkbox" name="is_featured">
            <span class="checkmark"></span>
        </label>
        <input type="text" name="title" placeholder="Title" required>
    </div>
    <div class="flex-cl gap-4">
        <div class="flex">
            <input type="text" name="url" placeholder="URL" required>
        </div>
        <p>url example: parimatch-epic-battle</p>
    </div>

    <div class="file-upload-section">
        <div class="file-upload-item">
            <label for="preview">Preview</label>
            <div class="file-input-wrapper">
                <input type="file" name="preview" id="preview" accept="image/*" class="file-input">
                <div class="file-input-label">
                    <span class="file-text">SELECT IMAGE</span>
                </div>
            </div>
            <div class="file-preview" id="preview-preview"></div>
        </div>

        <div class="file-upload-item">
            <label for="video">Video <span class="required">*</span></label>
            <div class="file-input-wrapper">
                <input type="file" name="video" id="video" accept="video/*" required class="file-input">
                <div class="file-input-label">
                    <span class="file-text">SELECT VIDEO</span>
                </div>
            </div>
            <div class="file-preview" id="video-preview"></div>
        </div>
    </div>

    <div class="divider"></div>

    <div class="flex-cl gap-12">
        <label for="credits_single_input">Сredits, separated by commas</label>
        <div class="flex">
            <input type="text" name="credits_single_input" id="credits_single_input" placeholder="Member: Role, Member2: Role">
        </div>
    </div>

    <div class="divider"></div>

    <div id="credits-list">
        <div class="credit-entry flex">
            <label class="custom-checkbox-pro">
                <input type="checkbox" name="credit_is_fav[]">
                <span class="checkmark"></span>
            </label>
            <input type="text" name="credit_names[]" placeholder="Name">
            <input type="text" name="credit_roles[]" placeholder="Role">
            <button type="button" class="remove-credit">✕</button>
        </div>
    </div>
    <button type="button" id="add-credit">ADD ROLE</button>

    <input type="submit" value="SUBMIT">
</form>
</div>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script>
$(function() {
    $('.file-input-wrapper').each(function() {
        const wrapper = $(this);
        const input = wrapper.find('.file-input');
        const label = wrapper.find('.file-input-label');
        
        wrapper.on('dragover', function(e) {
            e.preventDefault();
            e.stopPropagation();
            wrapper.addClass('drag-over');
        });
        
        wrapper.on('dragleave', function(e) {
            e.preventDefault();
            e.stopPropagation();
            wrapper.removeClass('drag-over');
        });
        
        wrapper.on('drop', function(e) {
            e.preventDefault();
            e.stopPropagation();
            wrapper.removeClass('drag-over');
            
            const files = e.originalEvent.dataTransfer.files;
            if (files.length > 0) {
                input[0].files = files;
                input.trigger('change');
            }
        });
    });

    $('#add-credit').on('click', function() {
        const creditHTML = `
            <div class="credit-entry flex">
                <label class="custom-checkbox-pro">
                    <input type="checkbox" name="credit_is_fav[]">
                    <span class="checkmark"></span>
                </label>
                <input type="text" name="credit_names[]" placeholder="Name">
                <input type="text" name="credit_roles[]" placeholder="Role">
                <button type="button" class="remove-credit">✕</button>
            </div>
        `;
        $('#credits-list').append(creditHTML);
    });

    $('#credits-list').on('click', '.remove-credit', function() {
        $(this).closest('.credit-entry').remove();
    });
});
</script>

{% endblock content %}